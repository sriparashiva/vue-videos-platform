import{_ as k}from"./Loader.4b3078b1.js";import{_ as v}from"./nuxt-link.58474e30.js";import{i as x,q as y,s as w,v as S,x as u,y as b,l as N,m as A,k as C,z as L,o as t,a as s,u as a,e as l,b as _,f as r,t as V,w as j,A as q}from"./entry.6a7138b8.js";import"./_plugin-vue_export-helper.c27b6911.js";const B={class:"flex justify-center items-center w-full h-full"},R={key:0,class:"flex justify-center items-center p-12 min-w-50vw min-h-50vh"},T={key:1,class:"px-10 py-14 my-16 min-w-40vw bg-accent_lighten dark:bg-dark_lighten"},E={key:0},P={class:"text-base text-red-400 opacity-70 text-center"},z=_("br",null,null,-1),H=x({__name:"Redirect",setup(D){const{authenticateProvider:d}=y(),m=w(),p=S(),o=u(!0),e=u(""),c=b(),g=N();A("NTV_Session",{sameSite:!0});const i=C();return L(async()=>{if(c.query.access_token)try{await d("google",c.query.access_token.toString()),i.setLoggedIn({jwt:p.value,user:m.value}),i.setAuthChecked(!0),g.push("/account")}catch(n){n.response?e.value=n.response._data.error.message:e.value="An unknown error occured.",o.value=!1}else e.value="An error occured in signing you in to Google.",o.value=!1}),(n,G)=>{const h=k,f=v;return t(),s("div",B,[a(o)?(t(),s("div",R,[l(h)])):(t(),s("div",T,[a(e).length>0?(t(),s("div",E,[_("p",P,[r(V(a(e))+" ",1),z,r("Please try "),l(f,{"aria-label":"Log in again",class:"font-medium text-accent dark:text-accent hover:dark:text-accent_lighten",to:"/login"},{default:j(()=>[r("logging in again")]),_:1})])])):q("",!0)]))])}}});export{H as default};
