import{_ as S}from"./VideoCard.b17f5780.js";import{_ as B}from"./CardSkeleton.9fc78275.js";import{i as M,x as N,A as $,B as D,v as n,k as E,y as L,o as i,a as _,b as l,t as x,u as r,F as h,r as y,z as T,I as A,c as F,C as H,D as P,e as R}from"./entry.04416d42.js";import{g as q}from"./useApi.d89844ea.js";import"./nuxt-link.d8b12ca1.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";import"./index.e9cbcaec.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./useStrapi.65287fd5.js";const z={class:"playlist__header px-6 sm:px-10 pt-10 pb-8"},O={class:"text-4xl font-medium mb-3"},j={class:"text-base"},G={class:"playlist__content px-6 sm:px-10 pb-10 pt-4 flex flex-wrap gap-x-2 gap-y-5 mb-16 pb-16"},J={key:0,class:"min-h-400px"},oe=M({__name:"[slug]",async setup(K){let c,f;const w=N(),V=A(),k=$(),e=([c,f]=D(()=>q(w.params.slug.toString())),c=await c,f(),c),t=n(e.attributes.videos?e.attributes.videos.data:null);E({title:`${e.attributes.title} - Vox TV`,meta:[{name:"description",content:e.attributes.description.substring(0,160)},{name:"og:title",content:`${e.attributes.title} - Vox TV`},{name:"og:description",content:e.attributes.description.substring(0,160)}]});const u=n(!1),p=n(2),m=n(4),v=n(null);L(()=>{new IntersectionObserver(C).observe(v.value?v.value:new HTMLElement)});const C=(o,d)=>{o.forEach(async s=>{s.isIntersecting&&p.value<=m.value&&(u.value=!0,await I(p.value,20)),p.value>m.value&&d.disconnect()})},I=async(o,d)=>{const s=await k(`${V.public.strapi.url}/api/videos`,{params:{filters:{playlists:{slug:{$eq:e.attributes.slug}}},populate:["coverImage"],pagination:{page:o,pageSize:d}}});if(m.value=s.meta.pagination.pageCount,s.data.length>0&&t.value){let g=new Set(t.value.map(b=>b.id)),a=[...t.value,...s.data.filter(b=>!g.has(b.id))];t.value.splice(0,t.value.length),t.value.push(...a)}u.value=!1,p.value++};return(o,d)=>{const s=S,g=B;return i(),_("div",null,[l("div",z,[l("h1",O,x(r(e).attributes.title),1),l("p",j,x(r(e).attributes.description),1)]),l("div",G,[(i(!0),_(h,null,y(r(t),a=>(i(),F(s,{key:a.id,video:a},null,8,["video"]))),128)),(i(),_(h,null,y(5,a=>H(R(g,{key:a}),[[P,r(u)]])),64))]),r(u)?(i(),_("div",J)):T("",!0),l("div",{class:"invisible",ref_key:"loadMore",ref:v},".",512)])}}});export{oe as default};
