import{_ as A}from"./nuxt-link.d8b12ca1.js";import{h as F,i as C,j as E,_ as L,k as N}from"./mdi.d567e790.js";import{_ as T}from"./Loader.0ad8c7fd.js";import{i as S,q as B,s as q,j as G,v as c,o as d,a as m,e as t,w as V,b as o,u as e,L as b,J as R,t as U,f as w,c as Z,k as z,l as D,m as P,z as H,I as J}from"./entry.04416d42.js";import{F as k,E as y,a as K}from"./vee-validate.esm.9972e588.js";import{_ as M}from"./_plugin-vue_export-helper.c27b6911.js";const O={class:"inputItem flex gap-3 p-3 bg-white dark:bg-dark_info"},Q={class:"flex flex-col justify-end min-h-4 mt-2"},W={class:"inputItem flex gap-3 p-3 bg-white dark:bg-dark_info"},X={class:"flex flex-col justify-end min-h-4 mt-2"},Y={key:0,"aria-label":"Log in",type:"submit",class:"submitForm flex justify-center items-center gap-2 p-3 transition bg-accent hover:bg-accent_darken text-accent_lighten font-medium"},ee=S({__name:"LoginForm",emits:["loginSuccess"],setup(j,{emit:_}){const a=B(),p=q(),{login:g}=G(),i=c(""),s=c(""),u=c(""),r=c(!1),f=n=>n?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n)?!0:"Not a valid email address":"This field is required",x=n=>n?!0:"This field is required",I=async()=>{r.value=!0;try{await g({identifier:i.value,password:s.value}),r.value=!1,_("loginSuccess",{user:a.value,jwt:p.value})}catch(n){u.value=n.error.message,r.value=!1}};return(n,l)=>{const h=L,$=T;return d(),m("div",null,[t(e(K),{autocomplete:"off",onSubmit:I,class:"registrationForm flex flex-col gap-2 mt-6"},{default:V(()=>[o("div",O,[t(h,{icon:e(F),color:"fill-gray-400 w-4",class:"transition hover:fill-white"},null,8,["icon"]),t(e(k),{type:"email",name:"email",rules:f,id:"email",placeholder:"Email Address",class:"bg-transparent outline-none border-none text-sm w-full font-medium",modelValue:e(i),"onUpdate:modelValue":l[0]||(l[0]=v=>b(i)?i.value=v:null)},null,8,["modelValue"])]),o("div",Q,[t(e(y),{name:"email"})]),o("div",W,[t(h,{icon:e(C),color:"fill-gray-400 w-4",class:"transition hover:fill-white"},null,8,["icon"]),t(e(k),{type:"password",name:"password",id:"password",placeholder:"Password",class:"bg-transparent outline-none border-none text-sm w-full font-medium",modelValue:e(s),"onUpdate:modelValue":l[1]||(l[1]=v=>b(s)?s.value=v:null),rules:x},null,8,["modelValue"])]),o("div",X,[t(e(y),{name:"password"})]),o("p",{class:R(["text-base text-red-400 transition text-center w-full",e(u)?"opacity-100 visible":"opacity-0 invisible"])},U(e(u)),3),e(r)?(d(),Z($,{key:1})):(d(),m("button",Y,[t(h,{icon:e(E),color:"fill-white",class:"w-4"},null,8,["icon"]),w(" Log in ")]))]),_:1})])}}});const te=M(ee,[["__scopeId","data-v-19dd76a5"]]),oe={class:"flex justify-center items-center"},se={key:0,class:"px-10 py-14 my-16 <md:min-w-screen md:w-512px bg-accent_lighten dark:bg-dark_lighten"},ne=o("div",{class:"text-3xl font-bold mb-1 text-text dark:text-dark_text_lighten"}," Log in ",-1),ae={class:"text-base text-text_lighten dark:text-dark_text"},ie=["href"],re=o("span",{class:"font-medium text-white"}," Sign in with Google ",-1),le=o("p",{class:"separator my-3 text-text dark:text-dark_text opacity-50 text-center overflow-hidden"}," or ",-1),ge=S({__name:"login",setup(j){z({title:"Login - Vox TV"});const _=J(),a=D(),p=c(!1),g=P(),i=s=>{a.setLoggedIn({jwt:s.jwt,user:s.user}),a.setAuthChecked(!0),p.value=!0,g.push("/account")};return(s,u)=>{const r=A,f=L,x=te;return d(),m("div",oe,[e(a).getAuthChecked&&!e(a).getLoggedIn?(d(),m("div",se,[ne,o("p",ae,[w(" Don't have an account? "),t(r,{"aria-label":"Sign up",class:"font-medium text-accent dark:text-accent hover:dark:text-accent_lighten",to:"/register"},{default:V(()=>[w("Sign up")]),_:1})]),o("a",{href:`${e(_).public.strapi.url}/api/connect/google`,"aria-label":"Sign in with Google",class:"googleLogin flex justify-center items-center gap-2 mt-6 p-3 transition bg-accent hover:bg-accent_darken"},[t(f,{icon:e(N),color:"fill-white",class:"w-5"},null,8,["icon"]),re],8,ie),le,t(x,{onLoginSuccess:i})])):H("",!0)])}}});export{ge as default};
