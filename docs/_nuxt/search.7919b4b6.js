import{_ as j}from"./VideoCard.46e547c9.js";import{_ as z}from"./CardSkeleton.99747f73.js";import{i as R,y as V,B as L,x as u,N as P,S as T,z as B,o as l,a as d,u as o,A as x,b as y,F as b,r as C,c as g,D as $,E as I,e as S,w as q,T as D,G as E,j as F,l as G,$ as O,L as M}from"./entry.6a7138b8.js";import{_ as Q}from"./VideoSlider.6861d235.js";import{_ as A}from"./VideoSliderSkeleton.f4010597.js";import{u as H}from"./search.0699c6f9.js";import"./nuxt-link.58474e30.js";import"./numbro.min.56cf0f0c.js";import"./_plugin-vue_export-helper.c27b6911.js";const J={key:0,class:"flex p-18 text-lg justify-center items-center"},K={class:"px-10 pb-10 pt-4 flex flex-wrap gap-x-2 gap-y-5 mb-16 pb-16"},U={key:1,class:"min-h-400px"},W=R({__name:"SearchVideos",setup(N){const i=V(),_=L(),v=u(null),t=u(1),p=u(0),s=u(!0),e=u([]),w=P(()=>i.query.q);T(w,async(a,r)=>{t.value=1,a&&a.length>2&&(e.value.splice(0,e.value.length),s.value=!0,await m(t.value,20))});const m=async(a,r)=>{const n=await _("/videos",{params:{filters:{title:{$containsi:i.query.q}},populate:["coverImage"],pagination:{page:a,pageSize:r}}});if(n.data.length>0){let h=new Set(e.value.map(f=>f.id)),c=[...e.value,...n.data.filter(f=>!h.has(f.id))];e.value.splice(0,e.value.length),e.value.push(...c)}p.value=n.meta.pagination.pageCount,t.value++,s.value=!1},k=(a,r)=>{a.forEach(async n=>{n.isIntersecting&&t<=p&&(s.value=!0,await m(t.value,20)),t.value>p.value&&r.disconnect()})};return B(async()=>{s.value=!0,await m(t.value,20);const a=new IntersectionObserver(k,{rootMargin:"100px",threshold:0});v.value&&a.observe(v.value)}),(a,r)=>{const n=j,h=z;return l(),d("div",null,[!o(s)&&o(e).length==0?(l(),d("div",J," No search results ")):x("",!0),y("div",K,[(l(!0),d(b,null,C(o(e),c=>(l(),g(n,{key:`search-video-${c.id}`,video:c},null,8,["video"]))),128)),(l(),d(b,null,C(4,c=>$(S(h,{key:c}),[[I,o(s)]])),64))]),o(s)?(l(),d("div",U)):x("",!0),y("div",{class:"invisible",ref_key:"loadMore",ref:v},null,512)])}}}),X={key:0,class:"flex p-18 text-lg justify-center items-center"},Y={key:3,class:"min-h-400px"},Z=R({__name:"SearchPlaylists",setup(N){const i=V(),_=L(),v=u(null),t=u(1),p=u(0),s=u(!0),e=u([]),w=P(()=>i.query.q);T(w,async(a,r)=>{t.value=1,a&&a.length>2&&(e.value.splice(0,e.value.length),s.value=!0,await m(t.value,10))});const m=async(a,r)=>{const n=await _("/playlists",{params:{filters:{title:{$containsi:i.query.q}},fields:["title","description","slug"],populate:{videos:{fields:["title","slug","description","youtubeID","eventDate","viewCount","duration"],populate:["coverImage"]}},pagination:{page:a,pageSize:r}}});if(n.data.length>0){let h=new Set(e.value.map(f=>f.id)),c=[...e.value,...n.data.filter(f=>!h.has(f.id))];e.value.splice(0,e.value.length),e.value.push(...c)}p.value=n.meta.pagination.pageCount,t.value++,s.value=!1},k=(a,r)=>{a.forEach(async n=>{n.isIntersecting&&t<=p&&(s.value=!0,await m(t.value,10)),t.value>p.value&&r.disconnect()})};return B(async()=>{s.value=!0,await m(t.value,10);const a=new IntersectionObserver(k,{rootMargin:"100px",threshold:0});v.value&&a.observe(v.value)}),(a,r)=>{const n=Q,h=A;return l(),d("div",null,[!o(s)&&o(e).length==0?(l(),d("div",X," No search results ")):(l(),g(D,{key:1,name:"fade"},{default:q(()=>[(l(!0),d(b,null,C(o(e),c=>(l(),g(n,{key:`search-playlist-${c.id}`,playlist:c,class:"videoSlider"},null,8,["playlist"]))),128))]),_:1})),o(s)?(l(),g(E,{key:2,name:"fade"},{default:q(()=>[S(h)]),_:1})):x("",!0),o(s)?(l(),d("div",Y)):x("",!0),y("div",{class:"invisible",ref_key:"loadMore",ref:v},".",512)])}}}),ee={class:"search__tabs mt-18 mb-8 text-lg text-center flex justify-center items-center"},ue=R({__name:"search",setup(N){F({title:"Search Results - Nithyananda TV"});const i=u("videos"),_=H();return V(),G(),B(()=>{_.searchBarStatus||_.displaySearchBar()}),O(()=>{_.hideSearchBar()}),(v,t)=>{const p=W,s=Z;return l(),d(b,null,[y("div",ee,[y("div",{class:M(["tab__button py-3 px-10 flex-1",o(i)=="videos"?"active":""]),onClick:t[0]||(t[0]=e=>i.value="videos")}," Videos ",2),y("div",{class:M(["tab__button py-3 px-10 flex-1",o(i)=="playlists"?"active":""]),onClick:t[1]||(t[1]=e=>i.value="playlists")}," Playlists ",2)]),$(S(p,{class:"tab__videoResults"},null,512),[[I,o(i)=="videos"]]),$(S(s,{class:"tab__playlistResults"},null,512),[[I,o(i)=="playlists"]])],64)}}});export{ue as default};
